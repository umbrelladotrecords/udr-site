<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Umbrella Dot Records</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ロゴ用 -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&display=swap" rel="stylesheet">
  <!-- ガラケー風ドット -->
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">

  <style>
    :root{
      --logo-w: clamp(260px, 60vw, 640px);
      --logo-mt: clamp(40px, 6vh, 60px);
      --rail-w: 6px;
      --rail-grad1:#223; --rail-grad2:#7fb59c;
      --sns-gap: clamp(28px, 3vw, 48px);
      --icon-h: clamp(52px, 6vw, 82px);
      --page-max: 980px;

      --counter-gap-top: 60px;
      --counter-gap-bottom: 60px;

      /* 7セグ（赤LED・控えめ発光） */
      --seg-on: #ff3b3b; --seg-off:#0b1412; --seg-glow: rgba(255,59,59,.35);

      /* タイプ演出（遅め） */
      --type-speed: 120ms; --digit-pop: 200ms; --cursor-color: #dfe;

      /* 浮かび上がり（5秒・ゆっくり） */
      --reveal-duration: 5s;
      --reveal-ease: cubic-bezier(.17,.84,.44,1);
    }

    *{ box-sizing:border-box }
    html,body{ height:100%; margin:0; }
    body{
      background:#000; color:#fff; text-align:center;
      font-family:'Orbitron', Arial, sans-serif;
      overflow-x:hidden;
    }

    /* サイド縦レール */
    body::before, body::after{
      content:""; position:fixed; top:0; bottom:0; z-index:0;
      width:var(--rail-w);
      background:linear-gradient(180deg, var(--rail-grad1) 0%, var(--rail-grad2) 50%, var(--rail-grad1) 100%);
      opacity:.85; pointer-events:none;
    }
    body::before{ left:0 } body::after{ right:0 }

    .wrap{ position:relative; z-index:1; width:min(92vw, var(--page-max)); margin:0 auto; }

    .main-logo{ display:block; width:var(--logo-w); height:auto; margin:var(--logo-mt) auto 0; }

    /* ───────── カウンター（ドットフォント＋タイプ演出） ───────── */
    .counter{
      margin: var(--counter-gap-top) auto var(--counter-gap-bottom);
      font-family: 'DotGothic16', system-ui, -apple-system, 'Hiragino Kaku Gothic ProN','Yu Gothic','Meiryo',sans-serif;
      font-size: 14px; color: #dfe; line-height: 1.4; letter-spacing: .02em;
      display:inline-flex; align-items:baseline;
    }
    .type span{ opacity:0; transition: opacity .15s ease; }
    .type span.show{ opacity:1; }
    .cursor{ width:8px; height:1.05em; margin-left:2px; display:inline-block; background: var(--cursor-color); opacity:.65; animation: blink 1s step-end infinite; }
    @keyframes blink{ 50%{ opacity: .15 } }

    .sevenseg{ display:inline-flex; gap:4px; vertical-align:middle; margin:0 6px; }
    .digit{
      position:relative; width:18px; height:26px; display:inline-block;
      opacity:0; transform: translateY(4px) scale(.96);
      transition: opacity .15s ease, transform .2s ease;
      --t:3px; --pad:3px; /* セグ太さ＆余白 */
    }
    .digit.show{ opacity:1; transform: translateY(0) scale(1); }
    .seg{ position:absolute; background: var(--seg-off); border-radius:1px; }
    .on{ background:var(--seg-on); box-shadow:0 0 2px var(--seg-glow), 0 0 6px var(--seg-glow); }
    .a,.d,.g{ height: var(--t); left: var(--pad); right: var(--pad); }
    .a{ top: var(--pad); } .g{ top: calc(50% - var(--t)/2); } .d{ bottom: var(--pad); }
    .b,.c,.e,.f{ width: var(--t); top: calc(var(--pad) + var(--t)); bottom: calc(var(--pad) + var(--t)); }
    .b{ right: var(--pad); clip-path: inset(0 0 50% 0); }
    .c{ right: var(--pad); clip-path: inset(50% 0 0 0); }
    .f{ left: var(--pad);  clip-path: inset(0 0 50% 0); }
    .e{ left: var(--pad);  clip-path: inset(50% 0 0 0); }

    /* ▼ 浮かび上がり（初期は隠す） */
    .reveal-target{
      opacity: 0; transform: translateY(16px) scale(.98); filter: blur(4px);
      transition:
        opacity var(--reveal-duration) var(--reveal-ease),
        transform var(--reveal-duration) var(--reveal-ease),
        filter var(--reveal-duration) var(--reveal-ease);
    }
    .reveal{ opacity: 1 !important; transform: translateY(0) scale(1) !important; filter: blur(0) !important; }

    .hero{ display:block; margin:40px auto; width:min(90vw, 720px); height:auto; }

    .sns{
      margin: 40px auto 100px;
      display:flex; justify-content:center; align-items:center;
      gap: var(--sns-gap); flex-wrap: nowrap; max-width: min(92vw, 960px);
    }
    .sns a{ display:inline-flex; align-items:center; justify-content:center; }
    .sns img{ height: var(--icon-h); width:auto; display:block; transition: transform .25s ease; image-rendering: pixelated; }
    .sns img:hover{ transform: scale(1.5); }
    .sns img.youtube { height: calc(var(--icon-h) * 1.2); }
    .sns img.instagram { height: calc(var(--icon-h) * 1.2); }

    /* ===== スマホ版：1画面収まり＆カウンターを文章サイズに合わせる ===== */
    @media (max-width: 480px){
      :root{
        --sns-gap: 18px;
        --icon-h: 42px;
        --counter-gap-top: 2.5svh;
        --counter-gap-bottom: 2.5svh;
      }
      .wrap{
        min-height: 100svh;
        display: flex; flex-direction: column; align-items: center;
        justify-content: flex-start;
        padding-bottom: 2svh;
      }
      .counter{ font-size: 12px; } /* 文章側のサイズ */
      /* ← 数字を文章と同じくらいに小さくする */
      .sevenseg{ gap: 2px; margin: 0 4px; }
      .digit{
        width: 10px; height: 14px;   /* 数字自体の大きさ */
        --t: 2px; --pad: 2px;        /* セグの太さ＆余白を縮小 */
        transform: translateY(2px) scale(.98); /* ベースライン微調整 */
      }
      .hero{
        width: 82vw;
        margin-top: 3svh;
        margin-bottom: 4svh;
      }
      .sns{ margin: 0 0 3svh; }
    }

    /* ===== PC版：美術館レイアウト＋1画面収まり ===== */
    @media (min-width:1200px){
      :root{
        --logo-w:520px; --page-max:980px;
        --counter-gap-top: 4vh; --counter-gap-bottom: 4vh;
      }
      .wrap{
        min-height: 100vh;
        display:flex; flex-direction:column; align-items:center;
        justify-content:flex-start; padding-bottom: 2vh;
      }
      .hero{
        width: 420px;
        margin-top: 5vh;
        margin-bottom: 6vh;
      }
      .sns{ margin: 0 0 4vh; }
    }

    @media (min-width:1400px){
      :root{ --icon-h:68px; --sns-gap:44px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- ロゴ -->
    <img src="UDR_HP_logo_main.PNG" alt="Umbrella Dot Records" class="main-logo">

    <!-- カウンター -->
    <div class="counter" id="counterBox" role="status" aria-live="polite">
      <span class="type" id="prefix"></span>
      <span class="sevenseg" id="sevenseg" aria-label="訪問者カウンター"></span>
      <span class="type" id="suffix"></span>
      <span class="cursor" id="cursor" aria-hidden="true"></span>
    </div>

    <!-- メイン画像（後から出現） -->
    <img src="IMG_1705.jpeg" alt="Umbrella Logo" class="hero reveal-target" id="heroImg">

    <!-- SNS（後から出現） -->
    <div class="sns reveal-target" id="snsBlock">
      <a href="https://www.youtube.com/@umbrelladotrecords694" target="_blank" rel="noopener">
        <img src="youtube_logo.gif" class="youtube" alt="YouTube">
      </a>
      <a href="https://linkco.re/R9DNs8c9?lang=ja" target="_blank" rel="noopener">
        <img src="music_logo2.gif" alt="Music">
      </a>
      <a href="members.html">
        <img src="instagram_logo.gif" class="instagram" alt="Instagram">
      </a>
    </div>
  </div>

  <script>
    (()=>{
      const DIGITS = 6;
      const TYPE_MS = 120;     // 文字間隔
      const DIGIT_MS = 200;    // 数字1桁の間隔
      const AFTER_TYPE_DELAY = 1000; // タイプ完了から1秒待って開始
      const key = "udr_demo_counter";

      let count = parseInt(localStorage.getItem(key) || "0", 10) + 1;
      localStorage.setItem(key, String(count));

      function typeText(node, text){
        return new Promise(resolve=>{
          node.innerHTML = '';
          const chars = Array.from(text);
          let i = 0;
          const tick = () => {
            if(i < chars.length){
              const span = document.createElement('span');
              span.textContent = chars[i++];
              node.appendChild(span);
              requestAnimationFrame(()=> span.classList.add('show'));
              setTimeout(tick, TYPE_MS);
            }else{
              resolve();
            }
          };
          tick();
        });
      }

      const onMap = {0:"abcfed",1:"bc",2:"abged",3:"abgcd",4:"fgbc",5:"afgcd",6:"afgecd",7:"abc",8:"abcdefg",9:"abfgcd"};
      const makeDigit = (n)=>{
        const d = document.createElement('span');
        d.className = 'digit';
        for(const id of ['a','b','c','d','e','f','g']){
          const seg = document.createElement('span');
          seg.className = 'seg '+id + (onMap[n].includes(id) ? ' on' : '');
          d.appendChild(seg);
        }
        return d;
      };

      const prefix = document.getElementById('prefix');
      const sevenseg = document.getElementById('sevenseg');
      const suffix = document.getElementById('suffix');
      const cursor = document.getElementById('cursor');
      const hero = document.getElementById('heroImg');
      const sns  = document.getElementById('snsBlock');

      const prefixText = 'あなたは ';
      const suffixText = ' 番目のお客様です。';
      const s = String(count).padStart(DIGITS,'0');

      (async ()=>{
        await typeText(prefix, prefixText);

        sevenseg.textContent = '';
        for(let i=0;i<s.length;i++){
          const d = makeDigit(Number(s[i]));
          sevenseg.appendChild(d);
          requestAnimationFrame(()=> d.classList.add('show'));
          await new Promise(r=> setTimeout(r, DIGIT_MS));
        }

        await typeText(suffix, suffixText);

        cursor.style.display = 'none';
        document.getElementById('counterBox')
          .setAttribute('aria-label', `あなたは ${count} 番目のお客様です。`);

        // タイプ完了から1秒後に、5秒アニメでふわっと出現
        setTimeout(()=>{
          hero.classList.add('reveal');
          sns.classList.add('reveal');
        }, AFTER_TYPE_DELAY);
      })();
    })();
  </script>
</body>
</html>